---
title: User Management
description: Admin endpoints for creating and managing CEMS users
---

All admin endpoints require authentication via the `CEMS_ADMIN_KEY` environment variable.

## Authentication

Include the admin key in the `Authorization` header:

```bash
Authorization: Bearer <CEMS_ADMIN_KEY>
```

## Create User

<RequestExample>
```bash
POST /admin/users
Authorization: Bearer <CEMS_ADMIN_KEY>
Content-Type: application/json

{
  "username": "alice",
  "email": "alice@example.com",
  "is_admin": false,
  "settings": {}
}
```
</RequestExample>

<ParamField body="username" type="string" required>
  Unique username for the user
</ParamField>

<ParamField body="email" type="string">
  Email address (optional)
</ParamField>

<ParamField body="is_admin" type="boolean" default="false">
  Whether the user has admin privileges
</ParamField>

<ParamField body="settings" type="object" default="{}">
  Optional user settings dictionary
</ParamField>

<ResponseField name="user" type="object">
  Created user details
  <Expandable>
    <ResponseField name="id" type="string">
      User UUID
    </ResponseField>
    <ResponseField name="username" type="string">
      Username
    </ResponseField>
    <ResponseField name="email" type="string">
      Email address
    </ResponseField>
    <ResponseField name="is_admin" type="boolean">
      Admin status
    </ResponseField>
    <ResponseField name="api_key_prefix" type="string">
      First characters of API key for identification
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="api_key" type="string">
  Full API key - save this immediately as it won't be shown again
</ResponseField>

<ResponseField name="message" type="string">
  Warning message about saving the API key
</ResponseField>

<ResponseExample>
```json
{
  "user": {
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "username": "alice",
    "email": "alice@example.com",
    "is_admin": false,
    "api_key_prefix": "cems_abc"
  },
  "api_key": "cems_abc123def456...",
  "message": "User created. Save the API key - it will not be shown again."
}
```
</ResponseExample>

## List Users

<RequestExample>
```bash
GET /admin/users?include_inactive=false&limit=100&offset=0
Authorization: Bearer <CEMS_ADMIN_KEY>
```
</RequestExample>

<ParamField query="include_inactive" type="boolean" default="false">
  Include inactive users in results
</ParamField>

<ParamField query="limit" type="integer" default="100">
  Maximum number of users to return
</ParamField>

<ParamField query="offset" type="integer" default="0">
  Offset for pagination
</ParamField>

<ResponseField name="users" type="array">
  List of user objects
  <Expandable>
    <ResponseField name="id" type="string">
      User UUID
    </ResponseField>
    <ResponseField name="username" type="string">
      Username
    </ResponseField>
    <ResponseField name="email" type="string">
      Email address
    </ResponseField>
    <ResponseField name="is_admin" type="boolean">
      Admin status
    </ResponseField>
    <ResponseField name="is_active" type="boolean">
      Active status
    </ResponseField>
    <ResponseField name="api_key_prefix" type="string">
      API key prefix
    </ResponseField>
    <ResponseField name="created_at" type="string">
      ISO 8601 timestamp
    </ResponseField>
    <ResponseField name="last_active" type="string">
      ISO 8601 timestamp
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="count" type="integer">
  Number of users returned
</ResponseField>

## Get User

<RequestExample>
```bash
GET /admin/users/{user_id}
Authorization: Bearer <CEMS_ADMIN_KEY>
```
</RequestExample>

<ParamField path="user_id" type="string" required>
  User UUID or username
</ParamField>

<ResponseExample>
```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "username": "alice",
  "email": "alice@example.com",
  "is_admin": false,
  "is_active": true,
  "api_key_prefix": "cems_abc",
  "created_at": "2024-01-15T10:30:00Z",
  "last_active": "2024-02-28T14:22:00Z",
  "settings": {}
}
```
</ResponseExample>

## Update User

<RequestExample>
```bash
PATCH /admin/users/{user_id}
Authorization: Bearer <CEMS_ADMIN_KEY>
Content-Type: application/json

{
  "email": "newemail@example.com",
  "is_active": true,
  "is_admin": false,
  "settings": {"theme": "dark"}
}
```
</RequestExample>

<ParamField path="user_id" type="string" required>
  User UUID
</ParamField>

<ParamField body="email" type="string">
  New email address
</ParamField>

<ParamField body="is_active" type="boolean">
  Active status
</ParamField>

<ParamField body="is_admin" type="boolean">
  Admin status
</ParamField>

<ParamField body="settings" type="object">
  User settings dictionary
</ParamField>

## Delete User

<RequestExample>
```bash
DELETE /admin/users/{user_id}
Authorization: Bearer <CEMS_ADMIN_KEY>
```
</RequestExample>

<ParamField path="user_id" type="string" required>
  User UUID
</ParamField>

<ResponseExample>
```json
{
  "message": "User deleted"
}
```
</ResponseExample>

## Reset API Key

<RequestExample>
```bash
POST /admin/users/{user_id}/reset-key
Authorization: Bearer <CEMS_ADMIN_KEY>
```
</RequestExample>

<ParamField path="user_id" type="string" required>
  User UUID
</ParamField>

<ResponseField name="user" type="object">
  <Expandable>
    <ResponseField name="id" type="string">
      User UUID
    </ResponseField>
    <ResponseField name="username" type="string">
      Username
    </ResponseField>
    <ResponseField name="api_key_prefix" type="string">
      New API key prefix
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="api_key" type="string">
  New API key - save immediately
</ResponseField>

<ResponseField name="message" type="string">
  Warning message
</ResponseField>

<ResponseExample>
```json
{
  "user": {
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "username": "alice",
    "api_key_prefix": "cems_xyz"
  },
  "api_key": "cems_xyz789new456...",
  "message": "API key reset. Save the new key - it will not be shown again."
}
```
</ResponseExample>